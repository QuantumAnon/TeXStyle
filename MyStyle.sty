\ProvidesPackage{MyStyle}

%--------------------------------------------------
%Packages and Package Settings

  % Margin notes
    \usepackage{marginnote}

  % Document dimensions
    \usepackage{geometry}

  % Color control
    \usepackage{color}

    % Driver independent
    \usepackage{xcolor}

  % Multicols environment
    \usepackage{multicol}

  % Code listings
    \usepackage{listings}
    \lstset{
      basicstyle=\fontsize{8}{10}\ttfamily,
      aboveskip={1.0\baselineskip},
      belowskip={1.0\baselineskip},
      columns=fixed,
      extendedchars=true,
      breaklines=true,
      tabsize=2,
      prebreak=\raisebox{0ex}[0ex][0ex]{\ensuremath{\hookleftarrow}}, % linebreak symbols
      frame=lines,
      showtabs=false,
      showspaces=false,
      showstringspaces=false,
      keywordstyle=\color[rgb]{0.627,0.126,0.941},
      commentstyle=\color[rgb]{0.133,0.545,0.133},
      stringstyle=\color[rgb]{01,0,0},
      numbers=left,
      numberstyle=\small,
      stepnumber=1,
      numbersep=10pt,
      captionpos=t,
      numbers=left,
      stepnumber=1,
      firstnumber=1,
      numberfirstline=true
    }

    % MatLab code
    \usepackage{matlab-prettifier}

  % Files within files
    \usepackage{subfiles}

  % Referencing
    \usepackage{xr}
    \usepackage{zref}

  % Hyper-linking within LaTeX
    \usepackage{hyperref}
    % Link design
    \hypersetup
    {
      colorlinks=true,
      linkcolor=blue,
      filecolor=magenta,
      urlcolor=cyan,
    }
    \urlstyle{same}

  % Header control
    \usepackage{fancyhdr}
    \pagestyle{fancy}

  % Paragraph indent and skip control
    \usepackage{parskip}
    \setlength{\parskip}{1.5\baselineskip}
    \setlength{\parindent}{5pt}

  % Figure and asset control
    \usepackage{graphicx}
    \usepackage{svg}
    \usepackage{wrapfig}
    \usepackage{lscape}
    \usepackage{rotating}

  % Captions in floating environments
    \usepackage{caption}

  % Symbols
    \usepackage{amsmath,amssymb,textcomp,gensymb,amsthm,bbm,dsfont,fdsymbol}

  % Unicode within maths and font
    %\usepackage{unicode-math}
    %\setmathfont{XITS Math}
    %\setmathfont{xits-math.otf}

  % Extra underlines
    \usepackage{ulem}

  % Lists
    \usepackage[shortlabels]{enumitem}

  % Drawn Graphics
    \usepackage{tikz, tkz-euclide}
    \usetkzobj{all}
    \usetikzlibrary{arrows.meta,intersections,calc}

  % Physics notation
    \usepackage{physics}

%--------------------------------------------------

%--------------------------------------------------
% Document Preparation

  % Draft version detection
  \newif\if@draftVersion
  \DeclareOption{draft}{\@draftVersiontrue}
  \ProcessOptions\relax

  % Distinguish between draft versions and non-draft versions
  \if@draftVersion
    % Paper sizes for draft versions
    \geometry{b4paper, total={18cm,26cm}, inner=1.5cm, top=2cm, heightrounded, marginparsep=2cm}
    %, outer=8cm, inner=2cm, heightrounded, marginparwidth=5cm, marginparsep=2cm

    % Emphasis and margin notes
    \newcommand{\marEmp}[3]{#1\marginnote{\emph{#1}:#2}[#3]}
    \newcommand{\marNote}[2]{\marginnote{#1}[#2]}
  \else
    % Paper sizes for non-draft versions
    \geometry{a4paper, total={18cm,25cm}, inner=1.5cm, top=2cm, heightrounded, marginparwidth=0cm, marginparsep=0cm}
    % Emphasis and margin notes are discouraged in non-draft versions
    \newcommand{\marEmp}[3]{
      #1
      \PackageWarning{MyStyle}{Emphasis margin note:\MessageBreak
      \space \space \"#1: #2\" \MessageBreak
      not removed, consider removing for final draft.}
    }

    \newcommand{\marNote}[2]{
      \PackageWarning{MyStyle}{Margin note:\MessageBreak
      \space \space \"#1\" \MessageBreak
      not removed, consider removing for final draft.}
    }

  \fi

%--------------------------------------------------

%--------------------------------------------------
%Operators, Commands and Styles

  % Macros
    % Matrix style (more for code clarity than anything else)
    \newcommand{\mat}[1]{\vb{#1}}
    % Implied by
    \newcommand{\implied}{\Longleftarrow}
    % Does not imply
    \newcommand{\nImplies}{\nLongrightarrow}
    % Is not implied by
    \newcommand{\nImplied}{\nLongleftarrow}
    % Not equivalent to
    \newcommand{\nEquiv}{\nLeftrightarrow}
    % Contradiction
    \newcommand{\Cont}{\text{\textreferencemark}}
    % Taking in a basis
    \newcommand{\basis}[2]{\qty[#1]_{#2}}

    % Inverse Hyperbolic functions
    \DeclareMathOperator{\arcosh}{arcosh}
    \DeclareMathOperator{\arsinh}{arsinh}
    \DeclareMathOperator{\artanh}{artanh}
    \DeclareMathOperator{\arsech}{arsech}
    \DeclareMathOperator{\arcsch}{arCsch}
    \DeclareMathOperator{\arcoth}{arCoth} 
  
    

  % Referencing
    % Create a reference with a page number
    \newcommand{\PagRef}[1]{\ref{#1}, pp.\pageref{#1}}
    \newcommand{\QuikRef}[1]{\ref{#1}}

  % Section Title styles
    \renewcommand\thesubsection{\arabic{section}.\arabic{subsection}}
    \renewcommand\thesection{\textsection\arabic{section}}

  % Theorem, definition, etc. styles
    % Refreshes every section
    \newtheorem{theorem}{Theorem}[section]
    % Refreshes every theorem
    \newtheorem{corollary}{Corollary}[theorem]
    \newtheorem{lemma}{Lemma}[theorem]    
    
    % Refreshes every section
    \newtheorem{examples}{Examples}[section]
    % Refreshes every example
    \newtheorem{example}{}[examples]

    % Unumbered example

    % Refreshes every section
    \newtheorem{definition}{Definition}[section]
    % Refreshes every definition
    \newtheorem{subDef}{}[definition]

    % Refreshes every section
    \newtheorem{proposition}{Proposition}[section]
    % Refreshes every proposition
    \newtheorem{subProp}{}[proposition]
    
    % Unumbered variants
    \newtheorem*{theorem*}{Theorem}
    \newtheorem*{corollary*}{Corollary}
    \newtheorem*{lemma*}{Lemma}
    \newtheorem*{example*}{Example}
    \newtheorem*{definition*}{Definition}
    \newtheorem*{proposition*}{Proposition}

%--------------------------------------------------